<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SageMaker Falcon-7B Model Tester</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .main-content {
            padding: 40px;
        }
        
        .config-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid #007bff;
        }
        
        .config-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .test-section {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .test-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        .input-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #0056b3, #004085);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 123, 255, 0.3);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #545b62;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
        }
        
        .btn-success:hover {
            background: linear-gradient(135deg, #1e7e34, #155724);
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .output-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-top: 20px;
        }
        
        .output-section h4 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .output-text {
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 15px;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
        
        .status {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        
        .preset-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .preset-btn {
            padding: 8px 16px;
            background: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .preset-btn:hover {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            color: #6c757d;
            border-top: 1px solid #e1e5e9;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            .button-group {
                flex-direction: column;
            }
            .preset-buttons {
                justify-content: center;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ SageMaker Falcon-7B Tester</h1>
            <p>Test your deployed SageMaker endpoint with various text generation tasks</p>
        </div>

        <div class="main-content">
            <!-- Configuration Section -->
            <div class="config-section">
                <h3>‚öôÔ∏è Configuration</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="endpointUrl">API Endpoint URL</label>
                        <input type="url" id="endpointUrl" placeholder="https://your-endpoint.execute-api.region.amazonaws.com/prod/invoke" required>
                    </div>
                    <div class="form-group">
                        <label for="maxTokens">Max New Tokens</label>
                        <input type="number" id="maxTokens" value="512" min="1" max="2048">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="temperature">Temperature (0.1 - 2.0)</label>
                        <input type="number" id="temperature" value="0.8" min="0.1" max="2.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="topP">Top P (0.1 - 1.0)</label>
                        <input type="number" id="topP" value="0.9" min="0.1" max="1.0" step="0.1">
                    </div>
                </div>
            </div>

            <!-- Test Section -->
            <div class="test-section">
                <h3>üß™ Test the Model</h3>

                <!-- Preset Examples -->
                <div class="preset-buttons">
                    <button class="preset-btn" onclick="loadPreset('code')">üíª Code Generation</button>
                    <button class="preset-btn" onclick="loadPreset('translate')">üåç Translation</button>
                    <button class="preset-btn" onclick="loadPreset('sentiment')">üòä Sentiment Analysis</button>
                    <button class="preset-btn" onclick="loadPreset('qa')">‚ùì Question Answering</button>
                    <button class="preset-btn" onclick="loadPreset('recipe')">üç∞ Recipe Generation</button>
                    <button class="preset-btn" onclick="loadPreset('summarize')">üìù Summarization</button>
                </div>

                <div class="input-group">
                    <label for="userInput">Enter your prompt:</label>
                    <textarea id="userInput" placeholder="Type your prompt here... (e.g., 'Write a Python function to calculate fibonacci numbers')"></textarea>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="testModel()">üöÄ Test Model</button>
                    <button class="btn btn-secondary" onclick="clearAll()">üóëÔ∏è Clear All</button>
                    <button class="btn btn-success" onclick="testConnection()">üîó Test Connection</button>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Processing your request...</p>
                </div>

                <div id="status"></div>

                <div class="output-section">
                    <h4>üì§ Model Response:</h4>
                    <div class="output-text" id="output">Your model's response will appear here...</div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>Powered by Amazon SageMaker ‚Ä¢ Falcon-7B Model ‚Ä¢ Built for AWS Learning</p>
        </div>
    </div>

    <script>
        // Preset prompts for different use cases
        const presets = {
            code: "Write a Python function to calculate the factorial of a number:",
            translate: "Translate the following English text to French:\n\nHello, how are you today?",
            sentiment: "Analyze the sentiment of this text:\n\n'I absolutely love this new product! It's amazing!'",
            qa: "What is machine learning and how does it work?",
            recipe: "Give me a recipe for chocolate chip cookies:",
            summarize: "Summarize this article:\n\nAmazon SageMaker is a fully managed machine learning service that enables developers and data scientists to quickly and easily build, train, and deploy machine learning models at any scale. It provides an integrated Jupyter authoring notebook instance for easy access to your data sources for exploration and analysis, so you don't have to manage servers. It also provides common machine learning algorithms that are optimized to run efficiently against extremely large data in a distributed environment."
        };

        function loadPreset(type) {
            document.getElementById('userInput').value = presets[type];
        }

        function clearAll() {
            document.getElementById('userInput').value = '';
            document.getElementById('output').textContent = 'Your model\'s response will appear here...';
            document.getElementById('status').innerHTML = '';
        }

        function showStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
        }

        async function testConnection() {
            const endpointUrl = document.getElementById('endpointUrl').value;

            if (!endpointUrl) {
                showStatus('Please enter an endpoint URL first', 'error');
                return;
            }

            showLoading(true);
            showStatus('Testing connection...', 'info');

            try {
                const response = await fetch(endpointUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        inputs: "Hello, this is a connection test.",
                        parameters: {
                            max_new_tokens: 10,
                            temperature: 0.7
                        }
                    })
                });

                if (response.ok) {
                    showStatus('‚úÖ Connection successful! Endpoint is ready.', 'success');
                } else {
                    showStatus(`‚ùå Connection failed: ${response.status} ${response.statusText}`, 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Connection error: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        async function testModel() {
            const endpointUrl = document.getElementById('endpointUrl').value;
            const userInput = document.getElementById('userInput').value;
            const maxTokens = parseInt(document.getElementById('maxTokens').value);
            const temperature = parseFloat(document.getElementById('temperature').value);
            const topP = parseFloat(document.getElementById('topP').value);

            if (!endpointUrl) {
                showStatus('Please enter an endpoint URL', 'error');
                return;
            }

            if (!userInput.trim()) {
                showStatus('Please enter a prompt to test', 'error');
                return;
            }

            showLoading(true);
            showStatus('Sending request to SageMaker endpoint...', 'info');

            try {
                const payload = {
                    inputs: userInput,
                    parameters: {
                        max_new_tokens: maxTokens,
                        temperature: temperature,
                        top_p: topP,
                        do_sample: true,
                        stop: ["<|endoftext|>", "</s>"]
                    }
                };

                const response = await fetch(endpointUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();

                if (data && data[0] && data[0].generated_text) {
                    document.getElementById('output').textContent = data[0].generated_text;
                    showStatus('‚úÖ Model response received successfully!', 'success');
                } else {
                    throw new Error('Invalid response format from endpoint');
                }

            } catch (error) {
                console.error('Error:', error);
                document.getElementById('output').textContent = `Error: ${error.message}`;
                showStatus(`‚ùå Error: ${error.message}`, 'error');
            } finally {
                showLoading(false);
            }
        }

        // Initialize with a default prompt
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('userInput').value = "Tell me about Amazon SageMaker and its capabilities.";
        });
    </script>
</body>

</html>